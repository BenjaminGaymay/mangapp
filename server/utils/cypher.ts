// import { rImgUri } from './regex/chapter';
// import { fetchFirstPage } from '../api/manga/[slug]/[chapter]';

import { fetchFirstPage } from '../api/manga/[slug]/[chapter]';

// let first_key = 'eo9G6qTb5yYKhIxLmSld8z7M31HkcvjunDVNOQCiFtWPprawBg4EJXs2f0UZRA' as string | null;
// let second_key = 'N6ktHuiPC93jvUJx1nlwIf8bdsZX5KGqyLeSQraW4mgRz02ABpF7OYTDMEVcho' as string | null;

let first_key = null as string | null;
let second_key = null as string | null;

export async function decodeCypher(cypher: string, retry = true) {
	try {
		if (!first_key || !second_key) await findCypher();
		if (!first_key || !second_key) return { imagesLink: [] };

		const b64 = cypher.replace(/[A-Z0-9]/gi, char => first_key![second_key!.indexOf(char)]);

		return JSON.parse(Buffer.from(b64, 'base64').toString('ascii')) as { imagesLink: string[] };
	} catch (e) {
		if (retry && e.message?.includes('JSON')) {
			first_key = null;
			second_key = null;

			return decodeCypher(cypher, false);
		}

		return { imagesLink: [] };
	}
}

async function getReferencePage() {
	const page: string = await fetchFirstPage('kingdom', '761');
	const [, cypher] = page.match(/<i id="data" data-data="(.+?)"/) || [null, ''];

	return cypher;
}

const decoded =
	'eyJudW1iZXIiOjc2MSwidXJpIjoiXC9sZWN0dXJlLWVuLWxpZ25lXC9raW5nZG9tXC83NjFcLyIsIm1hbmdhU2x1ZyI6Imtpbmdkb20iLCJpbWFnZXNMaW5rIjpbImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvODYzMTgwMTg3MGY4YjljMTQ3NjEyNDM4ZjgzMTc3YTg5NWU4ODZmOGY3Yzg1MTc4MzkyOGEwMzFmMWUxOTk2OGM1Mjg0MTkxMTY2MWQ3NDEzOGExMDdhODk5YlwvODc3YjhhMmI4OTI4OGU2NTFlM2U4Mjc5OGI3ZDhmMTIxZDBhMWQ5YzhkOWYxMzc1ODQxNzhhMDg4NTU4ODkzNzg0NjA4M2wwOGIwNDEyN2EyMzBkMmY5YTJjNlwvYjE4bTgxODI4MWM0ZDEwOGEyYW5hODkyYTExbTQxODVkMmRtMTc0NjU4YzViOGFuZTdjNmQ4ZDEwODIyZjhlbmY3OGwzOTduNDk4OTM5ODIxOTdtZjliNGM5NFwvajY5Mm4zNy5wbmciLCJodHRwczpcL1wvYzIuamFwc2Nhbi5sb2xcLzYxYTZjNWQzYjVhMzM0YzZiMmI2OTliM2MzOTYyMjUzYzA3MzExYTM1MmQzMDY5MzQ0YzMwNWE2MzZiNjg0NzNjMGIzNzZmNjIxMDZiMjY2NTMzNmMyZTM5NGNcLzM2MjkzZjdlMzg3NDM4MTY2YTgwM2IyNDMwMjYzNzZlNjA1ODZlNDAzYTQ1NjYyMTNmNmYzYTUzMzYwYjM4ODczMzE1M2RsNjMwNWE2ZTJlN2Q1Nzc2NDU3ZjFcLzU2OG0wNjc3YjYzOTM2MjMzNzNuZDNkN2Y2M21jNjkwNTcwbTQyYjIzMzcwYjM2bmIyYjE3MzA2YTNhNzQzMm40MjFsYjQxbmI0NjRhNGM3ZDRibWE0MzljNGJcL2piNDluYjIucG5nIiwiaHR0cHM6XC9cL2MyLmphcHNjYW4ubG9sXC9lN2MyZDFlOTYxYTkwMDYyNjg4MmI1MTk1OWEyNThiOWY2ZTk5N2M5Mjg4OTIyODk1MGU5MjE4MjMyNzJkMGQ5MjZmOTMyNjIzNzMyZTg3MmI5MjIyOGM5OTBjXC85ZDg0OTMzNzlhM2E5MTc0Mjk0ODkxODk5ZTgwOTMyMjIyMTEyZjBmOTQwZDJjODY5NTJjOTAxYzliNmI5YTRkOTg3OTllbDI5OTFkMjY4ODNiMTkzOTAyMzY3XC80MjZtMDJiMzAyOTVjMmY5OTMybmU5YTNhMmFtODJmNjIzMG03OGY5MjkyNmQ5Zm4xODg3MzlhMmM5ZDM5OWJuYzhibGEwNW4wMGUwYzBkM2UwNm1hMDA1NjA2XC9qODBibjE4LnBuZyIsImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvNjA5NWI0YTI2NGYyNTNjNTYxOTUwODgyNTI2NTcxMjJmOWUyNTA2MjcxMDJhNTAyZTNlMjA0ZTViNTI1NjNmMjU5NjJhNTA1NTA3NWQxMzVkMjU1YTFiMmUzMlwvMjcxNzJmNjAyZDY0MjAwZTVjN2QyNTFjMjYxMzI1NTE1MDQ5NTczODIzM2E1MDFhMjk1ODJkNDIyYTliMjQ3NDJjMGQyN2wwMjE0ZTUwMTU2NjQ0NjkzZTY0MFwvNzVlbTk1MzZmNWU4NDU4MjI2NG42MjM2MTU2bTk1YjlhNmNtYTE3MzMyZDllMjhuMzFlMDEyNDUxMmU2ZTIzbjIxMWw4MzduODM2MzkzYjZhMzZtZjM1OGMzNlwvajkzMG44MS5wbmciLCJodHRwczpcL1wvYzIuamFwc2Nhbi5sb2xcLzAwMjUxNDMyMjQ1MjczNzUzMTY1NTgwMmIyMjU5MTcyODk5MjcwYTIyMTEyZTUwMjAzNTI5NDU1ZTU5NTgzNTIwOTQyMDUzNTYwZjVhMTQ1YjI0NWIxYjJjMzJcLzI5MWUyZjY5MjE2MDI3MGM1ZDdkMmIxMzI3MTMyYjU1NTM0NTU1M2UyZjM3NWExYTIxNTgyYjQ1MjY5YjJkNzgyZjBkMmZsYjI3NDE1YjFiNjE0NjZhM2M2MTBcL2U1Mm04NTM2ZTU0OGU1MTJkNmFuYTJmNmQ1NW0xNTE5NjYwbWUxZTRjMjE5NTI0bjQxNzBiMjY1ZTI1NmUyY25mMWRsZDNhbmMzMDMyMzE2MzMybTUzNzg3MzNcL2o2MzVuMDEucG5nIiwiaHR0cHM6XC9cL2MyLmphcHNjYW4ubG9sXC81ODAzNzI4MGQyNjAyMWYzMzlkM2U2MzAxMDgzNDkzMDM3NzBjODUwNDkxMGEzNDBkMTkwMDI1MzAzYjMwMTQwMTc3MDgzMzNhODQzNTkzMzkwMjMyOWQwODE4XC8wNzkwMDk0YjBhNDkwZjhhMzk1MDAzOTAwMzk3MDczZjM3MmUzNzEzMGYxNjNkOTUwYzNiMGEyMTBhNzEwZjU1MDQ4MTBmbDEwMDI5MzU5NDRkMmU0ZDE3NDA4XC82MzJtNjM1NDAzMDY5MzYwZjQ3bjgwNjRiMzdtOTNkNzk0NW05OTMzZjAzNzIwMG45OWU4NjBjMzkwMTRhMDZuYjk4bDYxY240MTUxMDE3NDgxZG02MTI2ZjEzXC9qZDFlbjM5LnBuZyIsImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvNTgyMzEyODA1MmQwYzFmMzQ5NjNhNmMwNTAyMzY5NjBhNzYwNzg0MGU5YTAzMzQwMjE5MDgyMTM2M2UzYzE0MDU3ZDA5M2YzMjg0M2Y5ZTMzMDAzYTlhMDAxOVwvMDQ5NDAzNGEwMjRiMGY4MzM3NWYwMzliMDk5MjA0M2UzMDI0M2ExNjBiMTgzNTk5MGYzYTA5MmQwODc0MDg1NTBmODYwMWwyMGIyYjMwOTA0OTIzNDMxZTQ5OFwvZjM4bTkzNzRlM2I2NDNjMDU0OG5mMGQ0YTM4bWMzMjdhNDZtOTk3NDUwYjcxMDRuYzlmOGIwNTMwMDk0OTBkbjc5M2xlMTVuMjE1MTIxMTQ4MTVtZDFjNmYxNFwvajYxYW5jOS5wbmciLCJodHRwczpcL1wvYzIuamFwc2Nhbi5sb2xcLzg4OTNkMjgwNTIzMGMxYTM1OTczMDZhMDgwOTM0OTEwZTc4MGU4MjBhOTkwYzNlMDUxZTBlMjEzNzM5M2YxMzBhN2QwODNhMzk4YjM1OWIzZTBhM2M5ODA5MTFcLzA2OTEwNzRkMDA0YzBlODczNzVkMGI5YzA2OWIwNTNkM2MyYTNiMTQwYzFhMzc5NzAzM2QwNzI5MDE3MTA3NTEwYzgwMDZsMDBiMmQzNjljNDEyMzQwMTQ0NzhcLzIzOG0wMzQ0YTNkNjYzNTA4NDNuMDBjNDIzZW1mMzk3ZjQ4bTE5ZjUyMDg3NzBmbmI5ODg1MDkzNzAxNDMwY25iOTZsODE5bjgxODE5MWQ0ODE1bTMxYzZhMTVcL2o3MTBuYTkucG5nIiwiaHR0cHM6XC9cL2MyLmphcHNjYW4ubG9sXC8yMDI1YjQ2MjI0YTIxMzU1OTFjNWM4YzI2MmE1NzExMjM5MTJkMDYyODFjMmE1ZjI2MzYyODQ5NWU1MjU0MzEyZDk1MmU1NDUyMDM1ZDFlNTEyOTUxMWMyNzNkXC8yODExMmU2ZTI5NmUyMDA3NWU3NzI2MTEyMzE5MmY1ODVjNGI1YTM3MmMzMjU0MWIyNDVhMjc0YzJjOTkyYTdjMmIwMDJhbGYyODRkNWUxMDY4NDI2NTNjNmQwXC81NTFtZjU0NmI1ZTg1NTQyODY2bmQyNzYyNTBtZDU5OWE2NW1kMTY4ODJmOTQyMG44MTkwMDIwNTIyYjZmMjBuNzFibGYzZm42MzIzMjNiNjYzMm1hMzE4NTM5XC9qYzNjbmMxLnBuZyIsImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvYzk1NGMzOTEyMzQxZTIyNDgwZDQ0NzExYTE1NDQwZTFhOGQxMDlhMTgwMTEzNDUxYjJlMTUzYzRiNDM0MzIxMTU4NzE0NDA0NjlhNDIwYjQ1MWQ0MTBmMTAyZVwvMTMwYzFjNTQxNjUyMTA5ZDRlNmUxYjAxMWQwYjE4NGQ0YjM4NDIyMzE1Mjc0YzA3MTE0YjE5MzAxMTg1MWQ2YzEyOWUxN2xlMWUzYjRkMGU1YTM3NTcyMDUzOVwvZjQ2bTk0YjVjNDI3NjRjMTE1YW44MTY1ZTQ5bTI0MjgzNTBtOTA2OGMxZDlkMTVuYjBlOWYxNDRjMTU1ODExbjMwZGwzMjluYzJjMjUyYzU5MjJtNDJlNzIyOFwvamQyNG4xMC5wbmciLCJodHRwczpcL1wvYzIuamFwc2Nhbi5sb2xcL2Y2NzEzMDA4ZDAyODg5YjFmNzAxOTRhOGQ4MzEyNzk4YjVhODA2NThjNzk4YTFjODQ5NzhlMDQxZDE1MWM5Mzg0NTA4OTFiMTU2ZDE5N2IxZjg0MTk3Mjg0OTdcLzg0NzU4NDIxOGQyMzgwNmMxYTM5ODI3MzhjN2Y4MzFiMTAwMDFlOTA4MDk3MTY3ODgzMTg4ZTAzODE1NDgzMzU4NDZkODFsNjhjMDAxMTcyMjUwZDI2OTAyYjZcLzExMG05MWYyZDFmNGYxYTgwMjJuOThiMmYxM205MTM1NDI4bWU3YTZkOGE2MThmbmE3YzZlOGIxZjhkMjA4YW5hNzVsMDk3bjU5Zjk3OTMyMDlkbTI5ODRiOWZcL2owOTluYTcucG5nIiwiaHR0cHM6XC9cL2MyLmphcHNjYW4ubG9sXC8zMDM1ODQ1MmI0MTI0Mzg1MzFhNWY4ZTIxMjE1OTFlMmY5NDJmMDMyMzExMmE1YjI5M2YyZjQ2NWM1OTU1MzkyYjljMjk1ZjUyMDM1MTE0NWQyZTVjMWIyNzNkXC8yNTE5Mjk2MTJjNjIyMzA0NTQ3MDJhMTEyOTFmMjI1MDVkNDY1MzNjMmMzNzU4MWQyNzU4MjE0YTIxOTUyNTc5MjgwYTI1bDUyZjQ3NTgxNDY4NGI2NDNhNjAwXC8wNTZtOTVjNjI1YzgzNTcyODY3bmYyYjY4NTRtNDVkOWU2N21hMWQxZDJlMDQyY24xMTYwOTI3NTkyODZjMmFuYjE3bGYzYm4yMzMzMzM4NjUzYm0xMzQ4ODMzXC9qYTNmbmUxLnBuZyIsImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvMTE2NjE1YTNiNTQzYjQ3NjYyYjZkOTAzOTNlNjUyOTNjMDYzOTFkMzIyNzM0NjgzMTRkMzA1ZjYyNjM2MDQzM2QwNzMwNmU2MTE0NmMyZTZkM2Y2NTI0MzM0MVwvMzcyYjM0N2UzMzc1MzUxOTY4ODEzMjJjM2UyNDM5NmE2MzU3NjM0NjNlNDM2NTI1M2Y2NzM0NTEzNzA0Mzg4OTMxMTgzY2xjMzM1MjZhMmQ3ZDU1N2Y0MDczMVwvODZhbTg2NjdiNjU5ZDZhMzI3N245MzE3NjZlbTE2YTBkN2RtZTI1MzczZDFjMzVuMDJjMWQzNjZjMzA3ZDNkbjAyY2wzNDJuODQxNDY0MTdhNGJtNDRiOTc0NlwvamI0ZG4wMi5wbmciLCJodHRwczpcL1wvYzIuamFwc2Nhbi5sb2xcL2ExNzZlNTczMTUwMzQ0NDZiMmY2MzlkMzQzNjYyMmYzNzAzMzUxYTNkMmIzZDY3MzQ0NjM4NTI2ODY4NmQ0NTMwMDkzNjYyNjExNTY4Mjg2YzMwNjEyNjNlNDlcLzMzMjYzYzdkMzk3MDNiMWE2OThiM2MyMTNmMmIzMjZkNjU1MDYyNGUzOTQ0NmUyZDNmNjgzMTU3M2MwZjNlOGIzMjFiMzBsYzNmNTk2NzI2NzI1MDdjNGQ3NzFcLzA2Zm1mNjI3NjY1OWM2NTNhNzRuMDMzNzY2YW01NmQwZDdjbWEyYjRjMzYxNTM4bjIyZTEzMzY2MDNkNzkzNW42MmVsZTQwbmM0YTQ3NGU3NzQxbTA0NDk0NGJcL2pmNDNuZDIucG5nIiwiaHR0cHM6XC9cL2MyLmphcHNjYW4ubG9sXC83NjIxZjBmOGQwZjhjOTExOTc0MTc0NjgxOGUxYzcyOGI1YjhiNmQ4NTdjODIxMzhlOTA4MzBiMTExMDEzOTE4ODVmODAxYTE3NjYxMTczMTA4ODE1NzI4ZjliXC84Yjc3OGIyMThmMjY4ZTY2MWYzZjg2Nzg4MTc4OGQxYzFhMGUxMTk0OGU5NjE0NzE4NDEwODAwYjhlNTA4NTNhOGY2YTg2bDg4NzBkMTI3ODJjMGEyNDk4Mjc2XC83MWJtYTE1MmMxZTQ4MTI4MTI4bmU4MzJkMWJtMjE3NTIyY21kNzgwYjgzNmQ4NG4zNzI2NzhhMTM4NTI0OGNuMDc4bDY5N244OTc5MjlmMmY5ZG1mOWM0MTk5XC9qNDk3bjY3LnBuZyIsImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvNzgwM2QyYzA1MjAwNDE2M2U5NjMxNjEwMTAwM2E5NjA5NzkwMzg2MDM5ZTBlM2QwNzFlMDYyNDM2MzgzNzE4MDI3YTAwM2UzMTgyMzM5YTNhMDEzMTkwMGUxNlwvMDM5ZTBhNGIwMTQ5MGU4ODMyNWUwNzk5MDc5NjAyMzQzYzI0MzYxNDA4MWEzMTlkMGEzZjAwMjgwMjc3MDg1MzBkOGYwZGw2MDAyYjNiOTQ0ZDJjNDYxYTRmOFwvMTNlbTMzNTQ5Mzg2MzNmMDA0NW40MDE0MTMwbTEzYTc0NDRtZTk0M2UwMDhiMDNuYjkyOGIwMDMxMDg0OTBhbjQ5NWxjMWFuZjE3MTAxZDRjMTVtMDE0NjYxZVwvajYxMW4xOS5wbmciLCJodHRwczpcL1wvYzIuamFwc2Nhbi5sb2xcL2IwYjUwNDkyNDQ5MmUzNjVjMWY1OThiMmMyNDViMWEyOTk5MjQwNDI3MWIyMDUwMjEzZDIwNDE1YTU3NTIzNjI5OTMyZDU0NTYwZTVlMTY1ZjIxNTQxODJiMzRcLzI5MTAyNDY2MjI2MzJhMGI1NzczMjAxMDI0MTQyNDVkNTQ0NjUwMzgyYzM3NWYxMTI0NTEyZDQ3MmM5MjIyN2MyNzBjMjdsNjJmNDI1YzEyNmY0ZDY2MzQ2NzBcLzE1OW0zNWY2MzUyODE1NzI0NmFuNDI0Njk1MW1jNWY5OTY1bWUxMzZlMjMwYjIybjExNzBhMjQ1NTIzNjQyNG44MWNsMzM1bmEzYjNiMzA2OTM0bTkzZTg2M2NcL2pmMzluYjEucG5nIiwiaHR0cHM6XC9cL2MyLmphcHNjYW4ubG9sXC9mNjExOTA2ODMwOTgxOTgxZDc1MWE0ZjhhODMxODcwODU1NDgwNjc4ZTc3OGExZTg3OTI4YTBhMTkxYzE4OTA4YzUyOGUxMTFjNmYxOTc1MTA4MTE5Nzc4MTk5XC84YTdkOGUyOTgyMjE4ZTYxMTEzYThiNzU4ZjczODIxNzFhMGUxZTk0ODI5MTEwN2I4YjFjODIwOTg0NTM4YjM5ODg2MjhmbGE4MTBkMWM3NTJhMDgyNDkwMmU2XC9kMTRtMDE5MjYxMDRjMTQ4NzIwbjQ4MDJkMTRtMjEzNTgyMW01NzYzMDg5Njg4Nm4xNzc2OTgwMTE4ODI2OGRuZDdhbGQ5Zm44OWY5MTk5MjY5M205OTE0ODlkXC9qNTlhbmY3LnBuZyIsImh0dHBzOlwvXC9jMi5qYXBzY2FuLmxvbFwvYzlmNGUzNzE0MzYxNTI2NGYwZjRiNzgxMzE1NDIwNjE2ODQxYzk0MWEwYjEzNDUxZjI2MTgzNzQ3NDk0NjI4MWE4NTFmNDY0MDllNDMwMzQ5MTY0ODBlMWYyNlwvMTIwYjFiNWYxNzVjMTk5ZjQ3NmYxZDBhMTkwYzEwNDk0MzNkNDMyNDFkMjQ0NTA3MWU0ZjFlMzMxMThmMWM2MjFjOWIxM2wzMWEzZDRmMDc1NzNkNTYyYTViOVwvZDQybWU0YzU3NDU3MTRkMTY1NG42MTc1NjQxODM1NGk1NDdtODA4NzMxOTk3MTNuODBkOWExNTRhMTc1ZDExbmIwYmxiMmZuNDJjMmYyZTU3MjRtNjI1NzYyZlwvamYyYm44MC5qcGciXSwiYWxsSW5PbmUiOmZhbHNlfQ==';

async function findCypher() {
	const cypher = await getReferencePage();

	let first = '';
	let second = '';
	for (let i = cypher.length - 1; i >= 0; i--) {
		if (second.includes(cypher[i])) continue;

		first += decoded[i];
		second += cypher[i];
	}

	first_key = first;
	second_key = second;
}

// export let monoMap: object = {};
// export let multiMap: object = {};

// const MANGA = [
// 	{
// 		slug: 'kingdom',
// 		chapter: '731',
// 		decoded:
// 			'c811f6718134c14435c189a1f7614091a74160d440e4300109a430746971c4311681a90184d119e1a12139d4525/1e851e27194519961b954f2914811a8c106c13254397128715401f42151c434b445b16l51d3e48095c385328599/446m141534476431053n7175748m943815am20e9c118819n00d9111111a5111n305l32fn22c212f5728m32c7423/jc28na0'
// 	},
// 	{
// 		slug: 'isekai-apocalypse-mynoghra-the-conquest-of-the-world-starts-with-the-civilization-of-ruin',
// 		chapter: '16',
// 		decoded:
// 			'260155f804f894c8a1810288e0d8f02167c8582101480688c018f9e137c8a428782843e88818d4a8369821d8b6b1014118282538c838a6f882a88558f418c938e5c8a0b1e92863d85698f2680751c0d1bx88b0c157d2200299023621ey31324114b1188/2fz4822d10562bu215y4706482548bz47a118c6c88z27dyd97439004027005xf701f99zc9ax870y89ezd9f42969c056290u400489cw19f4e931c0a42978294xe78019d3a939902xd7b3b9094014292230cx37a8f089a08750f619c930e8c0axb7e9296w/d95790fz690250cxd7b089b3c959d02x0791093z29ex37394018b01089f04026d00y69bz2958490x472049b349a910cxc78629d7d0733902492z095yf904f09xc9ax870089e8d0f52064c05w2906490889cz19f5e036c9ax27742946e98v19d0a938902/4d9bzb7'
// 	},
// 	{
// 		slug: 'one-punch-man',
// 		chapter: '224',
// 		decoded:
// 			'82c160a4e9d4773143949821d99147815004a9e45231a7b168b1729140f489d1b2d4146159149921c4943601a3d1e254c8b/1f2f4c344436406d147d150a1d39163a4d4648201e1245691617152a1a0c10j813334d0e5f3b5c21539044k04153457c471/a5fl31b5a43kd428b55ke068b148812l20622100b1f0f13l907k3209b28jc26ja0e6d271324k929323d8934j805302ake25/l32alb0'
// 	},
// 	{
// 		slug: 'hajime-no-ippo',
// 		chapter: '1386',
// 		decoded:
// 			'6780778083031040975072d0d37031c054f03253636371008393c730e3d384f0d54071e39160a6f086e096f0d8039840f000f0/c3f6d020a380e30943d230a013c120b8605300908365008680f360c7001rb03283094412a4a1d45883fs335493b68330447t50/b4c3as53a794es09e770c7d00tb9133035d0500048905t19dt416782778286011r499t517sd1dr7932c15rf136516o61780185/91ct39'
// 	},
// 	{
// 		slug: 'tales-of-demons-and-gods',
// 		chapter: '386.5',
// 		decoded:
// 			'03d0f1f0a8c04953a32380c06470d050f0f014b06230d9837520f980250090b05303a37312d099f3c67050b0a08081a326c0f8b073f0e27071405/883d273d0a0e280e213d4e0f630f1e0438331306213aj408293e9a4f27451f4c8c3ck039413a60320e44la0d41327141g136kf9089037f0al89b2/f05k4953e045f000606lf900d2f1f1alc14451aj2981c16k71d851fjf910b26k31dl817j21f28121019jb95301al711jd990f2c2715ib1a88181a/22lc9'
// 	},
// 	{
// 		slug: 'mashle',
// 		chapter: '114',
// 		decoded:
// 			'1196a70396c3b7d359d3a11611f384534223f6c67783f5c3c573a6e3e22673f3d6131576e466f4c30063c136b5/06c21302d671737353c546c21312a681d6f5733803701367e301b3016306e326f658538hf395d642b7d5579427/71b69i7687e6f93683c7djc3a70610f78eb69i82f1b380637j02b4034183f1f3bja26584fgc41894a30591c4bh/d45jd2'
// 	},
// 	{
// 		slug: 'tokyo-revengers',
// 		chapter: '260',
// 		decoded:
// 			'835419246141650199c4e6d182f10034e5b12451f7f1b831a20101942174f94419d488c1d9d198b10374426162816141a04171/a4b1b4a1a4e34122e1f4a1d284e1b1505412e4417182a108e1e13159b48r0183e4d04573e5b205c904dsb4a5e4b744c155atc1/45641875ao54csd0396188716tb0d861b431b0717tb091b320d3835215226s42630294c3e3d280f30r30etb22753fpf2bt32a2/030t90'
// 	}
// ];

// const WEBTOON = [
// 	{
// 		slug: 'solo-max-level-newbie',
// 		chapter: '54',
// 		decoded:
// 			'21662273a123360376e6a5f699434626b23353d691e3417358f3c4b3c983b1a681f3f53327039336595318c3051343a6d0f3d543a9035/763c5135953f44691932843e376e873f5768543e643e7438943clc3551692d7e5973437f1c64m16b7f6d9865337en333756b057ci86cm/52f173e0a3en72640375439nf2d5f4b9e4621427652574am243l027ke4a5f496454524bk345ld298e541745lf4clb2cn84bka48nf4f33/52n02'
// 	},
// 	{
// 		slug: 'return-of-the-female-knight',
// 		chapter: '44',
// 		decoded:
// 			'154192c417811984f5314054a274c7a19094d914c4c47331e8a17651a7910154c4b4b371d3c121f472b4c284a031a8e129f17461314477c13351d/1c153a16051f4612434b121c2643121a1f40021f7c11j417354f095a365d215a9640k849594f714f155fla115c40855eg042kd02901c8917lb012/11b291cl8092037672156217429kc21h821j80f3324i52a972cja29392d412cjc07332e6a27253aj900452clb2bj70dkc220f373b3c283a332a0e/32lf0'
// 	},
// 	{
// 		slug: 'ranker-s-return-remake',
// 		chapter: '37',
// 		decoded:
// 			'b53589b273d5b7322592e9d20432d4455365a4c5a5c523c52435a0c2917231d2f7729495234269a2c92265a2d0e5a75209626065463273/f5f445b932b7b271928575c042f0850862c1a5b8c25502d7928p5264f511e6747643f60095aq351685f8f572562r12962599e62m655q81/d0c239e24r3146c282b2brd104a3bn038073bp3384b371d4bp312q93e1d40434d3445463a1c4apc122c42p31a1c494733nd3fq73909321/446ra1'
// 	},
// 	{
// 		slug: 'gosu',
// 		chapter: '198',
// 		decoded:
// 			'd180f690e850a9f37670997309e341900040b7a056a0b3f3a510504084d036f06263e440745089c3765011d/3b2f3c6601170a79063a345d01323a6401013f10033d07203338069f313008820a87372f32ze072f3e98452/24218468230a83d4f366c310841be064a3a7e4awd3aa392700f7405b79d53056200850fb8912d2f0d2db81f/491eb59'
// 	},
// 	{
// 		slug: 'invincible-at-the-start',
// 		chapter: '10',
// 		decoded:
// 			'79b283a24862b1e59812b2128672e5057315833253b2837222e533a5455281a2d45528f2a7d2c912f3a5e0123235e20236824502b85215c/5b1120192d06260723572837293c2b642a40507b2502282455t721485d1467406331660553u6576c5186542c6dv823635d9d67qb56u11d0/c2f9621v617902f0528v91c3f4d1d4e0b373b482a44t61b4e39713b3148t71e30470138t3154b38s7321e338a342538ua3d85325f4aud3c/813fva1'
// 	},
// 	{
// 		slug: 'library-of-heaven-s-path',
// 		chapter: '60',
// 		decoded:
// 			'4818006825f8662817210628d1412601a9e1c70173e8b2e8316848b834586768d198c3e8077126b80178932835e884c8696176486091c2386/788f07163082888785878d8b148b808a81869e1c008b8418x98e071f7d200c279521611ay3132513411d8c24z688291a532au81ey97a6c8a5/886zd78568b1682zb783690900c68945100x6728f06x271y290029d1402609a0e9c3097xe7b1e93z694xb734506760d699c7e0077924b90w7/99z27'
// 	}
// ];

// function getOriginalURI(page: string) {
// 	const [option]: string[] = page.match(rImgUri);
// 	const [oUri]: string[] = option.split('https://c.japscan.ws/')[1].split('.');

// 	return oUri;
// }

// async function getDecodeCypherObject(list: { slug: string; chapter: string; decoded: string }[]) {
// 	return await Promise.all(
// 		list.map(async ({ slug, chapter, decoded }) => {
// 			const page = await fetchFirstPage(slug, chapter);
// 			const uri = getOriginalURI(page);

// 			return { cypher: uri, decoded };
// 		})
// 	);
// }

// function generateCypherMap(list: { cypher: string; decoded: string }[]) {
// 	return list.reduce((map, { cypher, decoded }) => {
// 		for (const i in cypher as any) {
// 			const input = cypher[i];
// 			const output = decoded[i];

// 			map[input] = output;
// 		}

// 		return map;
// 	}, {});
// }

// const LETTERS = [
// 	'a',
// 	'b',
// 	'c',
// 	'd',
// 	'e',
// 	'f',
// 	'g',
// 	'h',
// 	'i',
// 	'j',
// 	'k',
// 	'l',
// 	'm',
// 	'n',
// 	'o',
// 	'p',
// 	'q',
// 	'r',
// 	's',
// 	't',
// 	'u',
// 	'v',
// 	'w',
// 	'x',
// 	'y',
// 	'z',
// 	'0',
// 	'1',
// 	'2',
// 	'3',
// 	'4',
// 	'5',
// 	'6',
// 	'7',
// 	'8',
// 	'9',
// 	'/'
// ];

// function findMissingKey(cypher: object) {
// 	const remaining_keys = new Set(LETTERS);
// 	const remaining_values = new Set(LETTERS);

// 	for (const [key, value] of Object.entries(cypher)) {
// 		remaining_keys.delete(key);
// 		remaining_values.delete(value);
// 	}

// 	return { [[...remaining_keys][0]]: [...remaining_values][0] };
// }

// async function findCyphers() {
// 	const monoCypher = generateCypherMap(await getDecodeCypherObject(MANGA));
// 	monoMap = { ...monoCypher, ...findMissingKey(monoCypher) };

// 	const multiCypher = generateCypherMap(await getDecodeCypherObject(WEBTOON));
// 	multiMap = { ...multiCypher, ...findMissingKey(multiCypher) };
// }

// const DAY_IN_MS = 1000 * 60 * 60 * 24;
// setInterval(findCyphers, DAY_IN_MS);

// findCyphers();
